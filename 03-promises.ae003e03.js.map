{"mappings":"qhBAAAA,EAAA,S,iBAGA,MAAMC,EAASC,SAASC,cAAc,SAChCC,EAAO,CACXC,MAAO,EACPC,KAAM,EACNC,OAAQ,GAeV,SAASC,EAAcC,EAAUJ,GAE/B,OAAO,IAAIK,SAAQ,CAACC,EAASC,KAE3BC,YAAW,KACaC,KAAKC,SAAW,GAEnCJ,EAAQ,C,SAACF,E,MAAUJ,IAExBO,EAAO,C,SAACH,E,MAAUJ,GAAO,GAEtBA,EAAM,G,CAvBbJ,EAAOe,iBAAiB,SAGxB,SAAiBC,GACf,GAAIA,EAAEC,OAAOC,MAAQ,EAEnB,OADAF,EAAEC,OAAOC,MAAQ,GACVC,EAAAC,GAASC,OAAOC,QAAQ,GAAGN,EAAEC,OAAOM,2BAG7CpB,EAAKa,EAAEC,OAAOM,MAAQP,EAAEC,OAAOC,K,IARjClB,EAAOe,iBAAiB,UA0BxB,SAAkBC,GAChBA,EAAEQ,iBACF,IAAIC,EAAW,EACXC,EAAQC,OAAO,GAAGxB,EAAKC,SAC3B,IAAK,IAAIwB,EAAI,EAAGA,EAAIzB,EAAKG,OAAQsB,GAAK,EACpCH,GAAY,EACZC,GAASC,OAAO,GAAGxB,EAAKE,QAE3BE,EAAckB,EAAUC,GACtBG,MAAK,EAACrB,SAAEA,EAAQJ,MAAEA,MAWrB,IAAmB0B,IAVQ,uBAAqBtB,QAAiBJ,MAW/De,EAAAC,GAASC,OAAOU,QAAQD,EAVK,IAE5BE,OAAM,EAACxB,SAAEA,EAAQJ,MAAEA,MAWtB,IAAmB0B,IAVQ,sBAAoBtB,QAAiBJ,MAW9De,EAAAC,GAASC,OAAOC,QAAQQ,EAVK,G","sources":["src/js/03-promises.js"],"sourcesContent":["import \"notiflix/dist/notiflix-aio-3.2.5.min.js\";\nimport Notiflix from 'notiflix';\n\nconst formEl = document.querySelector(`.form`);\nconst refs = {\n  delay: 0,\n  step: 0,\n  amount: 0,\n};\n\nformEl.addEventListener(`input`, onInput);\nformEl.addEventListener(`submit`, onSubmit);\n\nfunction onInput(e) {\n  if (e.target.value < 0) {\n    e.target.value = ``;\n    return Notiflix.Notify.failure(`${e.target.name} cannot be negative`) \n  }\n  \n  refs[e.target.name] = e.target.value;\n};\n\nfunction createPromise(position, delay) {\n\n  return new Promise((resolve, reject) => {\n     \n    setTimeout(() => {\n      const shouldResolve = Math.random() > 0.3;\n       if (shouldResolve) {\n         resolve({position, delay})\n  } else {\n    reject({position, delay})\n  }\n    }, delay)\n    })\n};\n\nfunction onSubmit(e) {\n  e.preventDefault() \n  let position = 0;\n  let delay = Number(`${refs.delay}`);\n  for (let i = 0; i < refs.amount; i += 1) {\n    position += 1;\n    delay += Number(`${refs.step}`);\n\n createPromise(position, delay)\n  .then(({ position, delay }) => {\n    let messageOnSuccess = `✅ Fulfilled promise ${position} in ${delay}ms`;\n    onSuccess(messageOnSuccess)\n  })\n  .catch(({ position, delay }) => {\n    let messageOnFailure = `❌ Rejected promise ${position} in ${delay}ms`;\n    onFailure(messageOnFailure)\n  }); \n  }      \n};\n\nfunction onSuccess(msg) {\n  Notiflix.Notify.success(msg)\n};\n\nfunction onFailure(msg) {\n  Notiflix.Notify.failure(msg)\n};\n\n\n\n  //  createPromise(position, delay)\n  // .then(({ position, delay }) => {\n  //   console.log(`✅ Fulfilled promise ${position} in ${delay}ms`);\n  // })\n  // .catch(({ position, delay }) => {\n  //   console.log(`❌ Rejected promise ${position} in ${delay}ms`);\n  // });"],"names":["parcelRequire","$47d4ff9957288465$var$formEl","document","querySelector","$47d4ff9957288465$var$refs","delay","step","amount","$47d4ff9957288465$var$createPromise","position","Promise","resolve","reject","setTimeout","Math","random","addEventListener","e","target","value","$parcel$interopDefault","$eWCmQ","Notify","failure","name","preventDefault","position1","delay1","Number","i","then","msg","success","catch"],"version":3,"file":"03-promises.ae003e03.js.map"}